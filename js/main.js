(()=>{var be=(R=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(R,{get:(m,c)=>(typeof require!="undefined"?require:m)[c]}):R)(function(R){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+R+'" is not supported')});var De=class{doc;page_y0;page_y1;constructor(m,c){this.doc=c,this.page_y0=new Uint32Array(c.doc_pages+1),this.page_y1=new Uint32Array(c.doc_pages+1);for(var k=1;k<=c.doc_pages;k++)this.page_y0[k]=this.page_y1[k-1]+m,this.page_y1[k]=this.page_y0[k]+c.page_height[k]}getPage(m){let[c,k]=m,P=this.page_y0.findIndex(F=>F>=k);return Math.max(1,P)}getPageRange(m){let[c,k,P,F]=m,H=this.page_y1.findIndex(W=>W>=k),V=this.page_y0.findIndex(W=>W>=F),re=Math.max(1,H),ce=V!=-1?V-1:this.doc.doc_pages;return[re,ce]}setContainerCSS(m){m.style.height=`${this.page_y1[this.page_y1.length-1]}px`}setPageCSS(m,c,k){m.className="PDFPageContainer",c.className="PDFPageImage",m.style.top=`${this.page_y0[k]}px`,m.style.left="0px",m.style.height=`${this.doc.page_height[k]}px`,c.style.width=`${this.doc.page_width[k]}px`,c.style.height=`${this.doc.page_height[k]}px`}scrollTo(m,c,k){window.scrollTo({left:0,top:this.page_y0[m+1]+k})}};var Pr={},di=(()=>{var R=Pr.url;return function(c){c=c||{};var c=typeof c<"u"?c:{},k,P;c.ready=new Promise(function(e,r){k=e,P=r}),c.noExitRuntime=!0,c.noInitialRun=!0,c.locateFile=function(e,r){return window.location.href+"wasm/libmupdf.wasm"};var F=Object.assign({},c),H=[],V="./this.program",re=(e,r)=>{throw r},ce=typeof window=="object",W=typeof importScripts=="function",fe=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",U="";function Fr(e){return c.locateFile?c.locateFile(e,U):U+e}var te,ne,le,xr;function Ir(e){if(e instanceof ze)return;X("exiting due to exception: "+e)}var de,ve,Re;fe?(W?U=be("path").dirname(U)+"/":U=__dirname+"/",Re=()=>{ve||(de=be("fs"),ve=be("path"))},te=function(r,t){return Re(),r=ve.normalize(r),de.readFileSync(r,t?void 0:"utf8")},le=e=>{var r=te(e,!0);return r.buffer||(r=new Uint8Array(r)),r},ne=(e,r,t)=>{Re(),e=ve.normalize(e),de.readFile(e,function(n,o){n?t(n):r(o.buffer)})},process.argv.length>1&&(V=process.argv[1].replace(/\\/g,"/")),H=process.argv.slice(2),process.on("uncaughtException",function(e){if(!(e instanceof ze))throw e}),process.on("unhandledRejection",function(e){throw e}),re=(e,r)=>{if(ir())throw process.exitCode=e,r;Ir(r),process.exit(e)},c.inspect=function(){return"[Emscripten Module object]"}):(ce||W)&&(W?U=self.location.href:typeof document<"u"&&document.currentScript&&(U=document.currentScript.src),R&&(U=R),U.indexOf("blob:")!==0?U=U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):U="",te=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},W&&(le=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),ne=(e,r,t)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{if(n.status==200||n.status==0&&n.response){r(n.response);return}t()},n.onerror=t,n.send(null)},xr=e=>document.title=e);var me=c.print||console.log.bind(console),X=c.printErr||console.warn.bind(console);Object.assign(c,F),F=null,c.arguments&&(H=c.arguments),c.thisProgram&&(V=c.thisProgram),c.quit&&(re=c.quit);var We=0,jr=e=>{We=e},Nr=()=>We,ie;c.wasmBinary&&(ie=c.wasmBinary);var Br=c.noExitRuntime||!0;typeof WebAssembly!="object"&&K("no native wasm support detected");var he,Te=!1,Ce;function Or(e,r){e||K(r)}function Ge(e){var r=c["_"+e];return r}function Xe(e,r,t,n,o){var a={string:function(E){var M=0;if(E!=null&&E!==0){var j=(E.length<<2)+1;M=Ue(j),Ur(E,M,j)}return M},array:function(E){var M=Ue(E.length);return Ke(E,M),M}};function s(E){return r==="string"?oe(E):r==="boolean"?Boolean(E):E}var u=Ge(e),f=[],l=0;if(n)for(var d=0;d<n.length;d++){var w=a[t[d]];w?(l===0&&(l=g()),f[d]=w(n[d])):f[d]=n[d]}var h=u.apply(null,f);function p(E){return l!==0&&y(l),s(E)}return h=p(h),h}function Lr(e,r,t,n){t=t||[];var o=t.every(function(s){return s==="number"}),a=r!=="string";return a&&o&&!n?Ge(e):function(){return Xe(e,r,t,arguments,n)}}var $e=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function ee(e,r,t){for(var n=r+t,o=r;e[o]&&!(o>=n);)++o;if(o-r>16&&e.buffer&&$e)return $e.decode(e.subarray(r,o));for(var a="";r<o;){var s=e[r++];if(!(s&128)){a+=String.fromCharCode(s);continue}var u=e[r++]&63;if((s&224)==192){a+=String.fromCharCode((s&31)<<6|u);continue}var f=e[r++]&63;if((s&240)==224?s=(s&15)<<12|u<<6|f:s=(s&7)<<18|u<<12|f<<6|e[r++]&63,s<65536)a+=String.fromCharCode(s);else{var l=s-65536;a+=String.fromCharCode(55296|l>>10,56320|l&1023)}}return a}function oe(e,r){return e?ee(Z,e,r):""}function pe(e,r,t,n){if(!(n>0))return 0;for(var o=t,a=t+n-1,s=0;s<e.length;++s){var u=e.charCodeAt(s);if(u>=55296&&u<=57343){var f=e.charCodeAt(++s);u=65536+((u&1023)<<10)|f&1023}if(u<=127){if(t>=a)break;r[t++]=u}else if(u<=2047){if(t+1>=a)break;r[t++]=192|u>>6,r[t++]=128|u&63}else if(u<=65535){if(t+2>=a)break;r[t++]=224|u>>12,r[t++]=128|u>>6&63,r[t++]=128|u&63}else{if(t+3>=a)break;r[t++]=240|u>>18,r[t++]=128|u>>12&63,r[t++]=128|u>>6&63,r[t++]=128|u&63}}return r[t]=0,t-o}function Ur(e,r,t){return pe(e,Z,r,t)}function Fe(e){for(var r=0,t=0;t<e.length;++t){var n=e.charCodeAt(t);n>=55296&&n<=57343&&(n=65536+((n&1023)<<10)|e.charCodeAt(++t)&1023),n<=127?++r:n<=2047?r+=2:n<=65535?r+=3:r+=4}return r}function qe(e){var r=Fe(e)+1,t=dr(r);return t&&pe(e,G,t,r),t}function Ke(e,r){G.set(e,r)}function zr(e,r,t){for(var n=0;n<e.length;++n)G[r++>>0]=e.charCodeAt(n);t||(G[r>>0]=0)}var xe,G,Z,Je,Hr,D,z,Vr,Ze;function Qe(e){xe=e,c.HEAP8=G=new Int8Array(e),c.HEAP16=Je=new Int16Array(e),c.HEAP32=D=new Int32Array(e),c.HEAPU8=Z=new Uint8Array(e),c.HEAPU16=Hr=new Uint16Array(e),c.HEAPU32=z=new Uint32Array(e),c.HEAPF32=Vr=new Float32Array(e),c.HEAPF64=Ze=new Float64Array(e)}var hi=c.INITIAL_MEMORY||536870912,er,rr=[],tr=[],nr=[],Yr=!1;function ir(){return Br}function Wr(){if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)$r(c.preRun.shift());Ne(rr)}function Gr(){Yr=!0,!c.noFSInit&&!i.init.initialized&&i.init(),i.ignorePermissions=!1,J.init(),Ne(tr)}function Xr(){if(c.postRun)for(typeof c.postRun=="function"&&(c.postRun=[c.postRun]);c.postRun.length;)Kr(c.postRun.shift());Ne(nr)}function $r(e){rr.unshift(e)}function qr(e){tr.unshift(e)}function Kr(e){nr.unshift(e)}var Q=0,Ie=null,ae=null;function pi(e){return e}function je(e){Q++,c.monitorRunDependencies&&c.monitorRunDependencies(Q)}function we(e){if(Q--,c.monitorRunDependencies&&c.monitorRunDependencies(Q),Q==0&&(Ie!==null&&(clearInterval(Ie),Ie=null),ae)){var r=ae;ae=null,r()}}function K(e){c.onAbort&&c.onAbort(e),e="Aborted("+e+")",X(e),Te=!0,Ce=1,e+=". Build with -sASSERTIONS for more info.";var r=new WebAssembly.RuntimeError(e);throw P(r),r}var Jr="data:application/octet-stream;base64,";function or(e){return e.startsWith(Jr)}function ar(e){return e.startsWith("file://")}var L;c.locateFile?(L="libmupdf.wasm",or(L)||(L=Fr(L))):L=new URL("libmupdf.wasm",Pr.url).toString();function sr(e){try{if(e==L&&ie)return new Uint8Array(ie);if(le)return le(e);throw"both async and sync fetching of the wasm failed"}catch(r){K(r)}}function Zr(){if(!ie&&(ce||W)){if(typeof fetch=="function"&&!ar(L))return fetch(L,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+L+"'";return e.arrayBuffer()}).catch(function(){return sr(L)});if(ne)return new Promise(function(e,r){ne(L,function(t){e(new Uint8Array(t))},r)})}return Promise.resolve().then(function(){return sr(L)})}function Qr(){var e={a:Bt};function r(s,u){var f=s.exports;c.asm=f,he=c.asm.Oa,Qe(he.buffer),er=c.asm.Za,qr(c.asm.Pa),we("wasm-instantiate")}je("wasm-instantiate");function t(s){r(s.instance)}function n(s){return Zr().then(function(u){return WebAssembly.instantiate(u,e)}).then(function(u){return u}).then(s,function(u){X("failed to asynchronously prepare wasm: "+u),K(u)})}function o(){return!ie&&typeof WebAssembly.instantiateStreaming=="function"&&!or(L)&&!ar(L)&&!fe&&typeof fetch=="function"?fetch(L,{credentials:"same-origin"}).then(function(s){var u=WebAssembly.instantiateStreaming(s,e);return u.then(t,function(f){return X("wasm streaming compile failed: "+f),X("falling back to ArrayBuffer instantiation"),n(t)})}):n(t)}if(c.instantiateWasm)try{var a=c.instantiateWasm(e,r);return a}catch(s){return X("Module.instantiateWasm callback failed with error: "+s),!1}return o().catch(P),{}}var O,$,et={2083832:()=>{throw"trylater"},2083854:e=>{throw new Error(oe(e))},2083893:()=>{throw new Error("Cannot create MuPDF context!")}};function Ne(e){for(;e.length>0;){var r=e.shift();if(typeof r=="function"){r(c);continue}var t=r.func;typeof t=="number"?r.arg===void 0?b(t)():b(t)(r.arg):t(r.arg===void 0?null:r.arg)}}function b(e){return er.get(e)}function rt(e){return D[vr()>>2]=e,e}var T={isAbs:e=>e.charAt(0)==="/",splitPath:e=>{var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return r.exec(e).slice(1)},normalizeArray:(e,r)=>{for(var t=0,n=e.length-1;n>=0;n--){var o=e[n];o==="."?e.splice(n,1):o===".."?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(r)for(;t;t--)e.unshift("..");return e},normalize:e=>{var r=T.isAbs(e),t=e.substr(-1)==="/";return e=T.normalizeArray(e.split("/").filter(n=>!!n),!r).join("/"),!e&&!r&&(e="."),e&&t&&(e+="/"),(r?"/":"")+e},dirname:e=>{var r=T.splitPath(e),t=r[0],n=r[1];return!t&&!n?".":(n&&(n=n.substr(0,n.length-1)),t+n)},basename:e=>{if(e==="/")return"/";e=T.normalize(e),e=e.replace(/\/$/,"");var r=e.lastIndexOf("/");return r===-1?e:e.substr(r+1)},join:function(){var e=Array.prototype.slice.call(arguments,0);return T.normalize(e.join("/"))},join2:(e,r)=>T.normalize(e+"/"+r)};function tt(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}else if(fe)try{var r=be("crypto");return function(){return r.randomBytes(1)[0]}}catch{}return function(){K("randomDevice")}}var q={resolve:function(){for(var e="",r=!1,t=arguments.length-1;t>=-1&&!r;t--){var n=t>=0?arguments[t]:i.cwd();if(typeof n!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!n)return"";e=n+"/"+e,r=T.isAbs(n)}return e=T.normalizeArray(e.split("/").filter(o=>!!o),!r).join("/"),(r?"/":"")+e||"."},relative:(e,r)=>{e=q.resolve(e).substr(1),r=q.resolve(r).substr(1);function t(l){for(var d=0;d<l.length&&l[d]==="";d++);for(var w=l.length-1;w>=0&&l[w]==="";w--);return d>w?[]:l.slice(d,w-d+1)}for(var n=t(e.split("/")),o=t(r.split("/")),a=Math.min(n.length,o.length),s=a,u=0;u<a;u++)if(n[u]!==o[u]){s=u;break}for(var f=[],u=s;u<n.length;u++)f.push("..");return f=f.concat(o.slice(s)),f.join("/")}},J={ttys:[],init:function(){},shutdown:function(){},register:function(e,r){J.ttys[e]={input:[],output:[],ops:r},i.registerDevice(e,J.stream_ops)},stream_ops:{open:function(e){var r=J.ttys[e.node.rdev];if(!r)throw new i.ErrnoError(43);e.tty=r,e.seekable=!1},close:function(e){e.tty.ops.flush(e.tty)},flush:function(e){e.tty.ops.flush(e.tty)},read:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.get_char)throw new i.ErrnoError(60);for(var a=0,s=0;s<n;s++){var u;try{u=e.tty.ops.get_char(e.tty)}catch{throw new i.ErrnoError(29)}if(u===void 0&&a===0)throw new i.ErrnoError(6);if(u==null)break;a++,r[t+s]=u}return a&&(e.node.timestamp=Date.now()),a},write:function(e,r,t,n,o){if(!e.tty||!e.tty.ops.put_char)throw new i.ErrnoError(60);try{for(var a=0;a<n;a++)e.tty.ops.put_char(e.tty,r[t+a])}catch{throw new i.ErrnoError(29)}return n&&(e.node.timestamp=Date.now()),a}},default_tty_ops:{get_char:function(e){if(!e.input.length){var r=null;if(fe){var t=256,n=Buffer.alloc(t),o=0;try{o=de.readSync(process.stdin.fd,n,0,t,-1)}catch(a){if(a.toString().includes("EOF"))o=0;else throw a}o>0?r=n.slice(0,o).toString("utf-8"):r=null}else typeof window<"u"&&typeof window.prompt=="function"?(r=window.prompt("Input: "),r!==null&&(r+=`
`)):typeof readline=="function"&&(r=readline(),r!==null&&(r+=`
`));if(!r)return null;e.input=Ee(r,!0)}return e.input.shift()},put_char:function(e,r){r===null||r===10?(me(ee(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(me(ee(e.output,0)),e.output=[])}},default_tty1_ops:{put_char:function(e,r){r===null||r===10?(X(ee(e.output,0)),e.output=[]):r!=0&&e.output.push(r)},flush:function(e){e.output&&e.output.length>0&&(X(ee(e.output,0)),e.output=[])}}};function ur(e){K()}var A={ops_table:null,mount:function(e){return A.createNode(null,"/",16895,0)},createNode:function(e,r,t,n){if(i.isBlkdev(t)||i.isFIFO(t))throw new i.ErrnoError(63);A.ops_table||(A.ops_table={dir:{node:{getattr:A.node_ops.getattr,setattr:A.node_ops.setattr,lookup:A.node_ops.lookup,mknod:A.node_ops.mknod,rename:A.node_ops.rename,unlink:A.node_ops.unlink,rmdir:A.node_ops.rmdir,readdir:A.node_ops.readdir,symlink:A.node_ops.symlink},stream:{llseek:A.stream_ops.llseek}},file:{node:{getattr:A.node_ops.getattr,setattr:A.node_ops.setattr},stream:{llseek:A.stream_ops.llseek,read:A.stream_ops.read,write:A.stream_ops.write,allocate:A.stream_ops.allocate,mmap:A.stream_ops.mmap,msync:A.stream_ops.msync}},link:{node:{getattr:A.node_ops.getattr,setattr:A.node_ops.setattr,readlink:A.node_ops.readlink},stream:{}},chrdev:{node:{getattr:A.node_ops.getattr,setattr:A.node_ops.setattr},stream:i.chrdev_stream_ops}});var o=i.createNode(e,r,t,n);return i.isDir(o.mode)?(o.node_ops=A.ops_table.dir.node,o.stream_ops=A.ops_table.dir.stream,o.contents={}):i.isFile(o.mode)?(o.node_ops=A.ops_table.file.node,o.stream_ops=A.ops_table.file.stream,o.usedBytes=0,o.contents=null):i.isLink(o.mode)?(o.node_ops=A.ops_table.link.node,o.stream_ops=A.ops_table.link.stream):i.isChrdev(o.mode)&&(o.node_ops=A.ops_table.chrdev.node,o.stream_ops=A.ops_table.chrdev.stream),o.timestamp=Date.now(),e&&(e.contents[r]=o,e.timestamp=o.timestamp),o},getFileDataAsTypedArray:function(e){return e.contents?e.contents.subarray?e.contents.subarray(0,e.usedBytes):new Uint8Array(e.contents):new Uint8Array(0)},expandFileStorage:function(e,r){var t=e.contents?e.contents.length:0;if(!(t>=r)){var n=1024*1024;r=Math.max(r,t*(t<n?2:1.125)>>>0),t!=0&&(r=Math.max(r,256));var o=e.contents;e.contents=new Uint8Array(r),e.usedBytes>0&&e.contents.set(o.subarray(0,e.usedBytes),0)}},resizeFileStorage:function(e,r){if(e.usedBytes!=r)if(r==0)e.contents=null,e.usedBytes=0;else{var t=e.contents;e.contents=new Uint8Array(r),t&&e.contents.set(t.subarray(0,Math.min(r,e.usedBytes))),e.usedBytes=r}},node_ops:{getattr:function(e){var r={};return r.dev=i.isChrdev(e.mode)?e.id:1,r.ino=e.id,r.mode=e.mode,r.nlink=1,r.uid=0,r.gid=0,r.rdev=e.rdev,i.isDir(e.mode)?r.size=4096:i.isFile(e.mode)?r.size=e.usedBytes:i.isLink(e.mode)?r.size=e.link.length:r.size=0,r.atime=new Date(e.timestamp),r.mtime=new Date(e.timestamp),r.ctime=new Date(e.timestamp),r.blksize=4096,r.blocks=Math.ceil(r.size/r.blksize),r},setattr:function(e,r){r.mode!==void 0&&(e.mode=r.mode),r.timestamp!==void 0&&(e.timestamp=r.timestamp),r.size!==void 0&&A.resizeFileStorage(e,r.size)},lookup:function(e,r){throw i.genericErrors[44]},mknod:function(e,r,t,n){return A.createNode(e,r,t,n)},rename:function(e,r,t){if(i.isDir(e.mode)){var n;try{n=i.lookupNode(r,t)}catch{}if(n)for(var o in n.contents)throw new i.ErrnoError(55)}delete e.parent.contents[e.name],e.parent.timestamp=Date.now(),e.name=t,r.contents[t]=e,r.timestamp=e.parent.timestamp,e.parent=r},unlink:function(e,r){delete e.contents[r],e.timestamp=Date.now()},rmdir:function(e,r){var t=i.lookupNode(e,r);for(var n in t.contents)throw new i.ErrnoError(55);delete e.contents[r],e.timestamp=Date.now()},readdir:function(e){var r=[".",".."];for(var t in e.contents)!e.contents.hasOwnProperty(t)||r.push(t);return r},symlink:function(e,r,t){var n=A.createNode(e,r,41471,0);return n.link=t,n},readlink:function(e){if(!i.isLink(e.mode))throw new i.ErrnoError(28);return e.link}},stream_ops:{read:function(e,r,t,n,o){var a=e.node.contents;if(o>=e.node.usedBytes)return 0;var s=Math.min(e.node.usedBytes-o,n);if(s>8&&a.subarray)r.set(a.subarray(o,o+s),t);else for(var u=0;u<s;u++)r[t+u]=a[o+u];return s},write:function(e,r,t,n,o,a){if(r.buffer===G.buffer&&(a=!1),!n)return 0;var s=e.node;if(s.timestamp=Date.now(),r.subarray&&(!s.contents||s.contents.subarray)){if(a)return s.contents=r.subarray(t,t+n),s.usedBytes=n,n;if(s.usedBytes===0&&o===0)return s.contents=r.slice(t,t+n),s.usedBytes=n,n;if(o+n<=s.usedBytes)return s.contents.set(r.subarray(t,t+n),o),n}if(A.expandFileStorage(s,o+n),s.contents.subarray&&r.subarray)s.contents.set(r.subarray(t,t+n),o);else for(var u=0;u<n;u++)s.contents[o+u]=r[t+u];return s.usedBytes=Math.max(s.usedBytes,o+n),n},llseek:function(e,r,t){var n=r;if(t===1?n+=e.position:t===2&&i.isFile(e.node.mode)&&(n+=e.node.usedBytes),n<0)throw new i.ErrnoError(28);return n},allocate:function(e,r,t){A.expandFileStorage(e.node,r+t),e.node.usedBytes=Math.max(e.node.usedBytes,r+t)},mmap:function(e,r,t,n,o){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);var a,s,u=e.node.contents;if(!(o&2)&&u.buffer===xe)s=!1,a=u.byteOffset;else{if((t>0||t+r<u.length)&&(u.subarray?u=u.subarray(t,t+r):u=Array.prototype.slice.call(u,t,t+r)),s=!0,a=ur(r),!a)throw new i.ErrnoError(48);G.set(u,a)}return{ptr:a,allocated:s}},msync:function(e,r,t,n,o){if(!i.isFile(e.node.mode))throw new i.ErrnoError(43);if(o&2)return 0;var a=A.stream_ops.write(e,r,0,n,t,!1);return 0}}};function nt(e,r,t,n){var o=n?"":"al "+e;ne(e,function(a){Or(a,'Loading data file "'+e+'" failed (no arrayBuffer).'),r(new Uint8Array(a)),o&&we(o)},function(a){if(t)t();else throw'Loading data file "'+e+'" failed.'}),o&&je(o)}var i={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(e,r={})=>{if(e=q.resolve(i.cwd(),e),!e)return{path:"",node:null};var t={follow_mount:!0,recurse_count:0};if(r=Object.assign(t,r),r.recurse_count>8)throw new i.ErrnoError(32);for(var n=T.normalizeArray(e.split("/").filter(w=>!!w),!1),o=i.root,a="/",s=0;s<n.length;s++){var u=s===n.length-1;if(u&&r.parent)break;if(o=i.lookupNode(o,n[s]),a=T.join2(a,n[s]),i.isMountpoint(o)&&(!u||u&&r.follow_mount)&&(o=o.mounted.root),!u||r.follow)for(var f=0;i.isLink(o.mode);){var l=i.readlink(a);a=q.resolve(T.dirname(a),l);var d=i.lookupPath(a,{recurse_count:r.recurse_count+1});if(o=d.node,f++>40)throw new i.ErrnoError(32)}}return{path:a,node:o}},getPath:e=>{for(var r;;){if(i.isRoot(e)){var t=e.mount.mountpoint;return r?t[t.length-1]!=="/"?t+"/"+r:t+r:t}r=r?e.name+"/"+r:e.name,e=e.parent}},hashName:(e,r)=>{for(var t=0,n=0;n<r.length;n++)t=(t<<5)-t+r.charCodeAt(n)|0;return(e+t>>>0)%i.nameTable.length},hashAddNode:e=>{var r=i.hashName(e.parent.id,e.name);e.name_next=i.nameTable[r],i.nameTable[r]=e},hashRemoveNode:e=>{var r=i.hashName(e.parent.id,e.name);if(i.nameTable[r]===e)i.nameTable[r]=e.name_next;else for(var t=i.nameTable[r];t;){if(t.name_next===e){t.name_next=e.name_next;break}t=t.name_next}},lookupNode:(e,r)=>{var t=i.mayLookup(e);if(t)throw new i.ErrnoError(t,e);for(var n=i.hashName(e.id,r),o=i.nameTable[n];o;o=o.name_next){var a=o.name;if(o.parent.id===e.id&&a===r)return o}return i.lookup(e,r)},createNode:(e,r,t,n)=>{var o=new i.FSNode(e,r,t,n);return i.hashAddNode(o),o},destroyNode:e=>{i.hashRemoveNode(e)},isRoot:e=>e===e.parent,isMountpoint:e=>!!e.mounted,isFile:e=>(e&61440)===32768,isDir:e=>(e&61440)===16384,isLink:e=>(e&61440)===40960,isChrdev:e=>(e&61440)===8192,isBlkdev:e=>(e&61440)===24576,isFIFO:e=>(e&61440)===4096,isSocket:e=>(e&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:e=>{var r=i.flagModes[e];if(typeof r>"u")throw new Error("Unknown file open mode: "+e);return r},flagsToPermissionString:e=>{var r=["r","w","rw"][e&3];return e&512&&(r+="w"),r},nodePermissions:(e,r)=>i.ignorePermissions?0:r.includes("r")&&!(e.mode&292)||r.includes("w")&&!(e.mode&146)||r.includes("x")&&!(e.mode&73)?2:0,mayLookup:e=>{var r=i.nodePermissions(e,"x");return r||(e.node_ops.lookup?0:2)},mayCreate:(e,r)=>{try{var t=i.lookupNode(e,r);return 20}catch{}return i.nodePermissions(e,"wx")},mayDelete:(e,r,t)=>{var n;try{n=i.lookupNode(e,r)}catch(a){return a.errno}var o=i.nodePermissions(e,"wx");if(o)return o;if(t){if(!i.isDir(n.mode))return 54;if(i.isRoot(n)||i.getPath(n)===i.cwd())return 10}else if(i.isDir(n.mode))return 31;return 0},mayOpen:(e,r)=>e?i.isLink(e.mode)?32:i.isDir(e.mode)&&(i.flagsToPermissionString(r)!=="r"||r&512)?31:i.nodePermissions(e,i.flagsToPermissionString(r)):44,MAX_OPEN_FDS:4096,nextfd:(e=0,r=i.MAX_OPEN_FDS)=>{for(var t=e;t<=r;t++)if(!i.streams[t])return t;throw new i.ErrnoError(33)},getStream:e=>i.streams[e],createStream:(e,r,t)=>{i.FSStream||(i.FSStream=function(){this.shared={}},i.FSStream.prototype={object:{get:function(){return this.node},set:function(o){this.node=o}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(o){this.shared.flags=o}},position:{get function(){return this.shared.position},set:function(o){this.shared.position=o}}}),e=Object.assign(new i.FSStream,e);var n=i.nextfd(r,t);return e.fd=n,i.streams[n]=e,e},closeStream:e=>{i.streams[e]=null},chrdev_stream_ops:{open:e=>{var r=i.getDevice(e.node.rdev);e.stream_ops=r.stream_ops,e.stream_ops.open&&e.stream_ops.open(e)},llseek:()=>{throw new i.ErrnoError(70)}},major:e=>e>>8,minor:e=>e&255,makedev:(e,r)=>e<<8|r,registerDevice:(e,r)=>{i.devices[e]={stream_ops:r}},getDevice:e=>i.devices[e],getMounts:e=>{for(var r=[],t=[e];t.length;){var n=t.pop();r.push(n),t.push.apply(t,n.mounts)}return r},syncfs:(e,r)=>{typeof e=="function"&&(r=e,e=!1),i.syncFSRequests++,i.syncFSRequests>1&&X("warning: "+i.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var t=i.getMounts(i.root.mount),n=0;function o(s){return i.syncFSRequests--,r(s)}function a(s){if(s)return a.errored?void 0:(a.errored=!0,o(s));++n>=t.length&&o(null)}t.forEach(s=>{if(!s.type.syncfs)return a(null);s.type.syncfs(s,e,a)})},mount:(e,r,t)=>{var n=t==="/",o=!t,a;if(n&&i.root)throw new i.ErrnoError(10);if(!n&&!o){var s=i.lookupPath(t,{follow_mount:!1});if(t=s.path,a=s.node,i.isMountpoint(a))throw new i.ErrnoError(10);if(!i.isDir(a.mode))throw new i.ErrnoError(54)}var u={type:e,opts:r,mountpoint:t,mounts:[]},f=e.mount(u);return f.mount=u,u.root=f,n?i.root=f:a&&(a.mounted=u,a.mount&&a.mount.mounts.push(u)),f},unmount:e=>{var r=i.lookupPath(e,{follow_mount:!1});if(!i.isMountpoint(r.node))throw new i.ErrnoError(28);var t=r.node,n=t.mounted,o=i.getMounts(n);Object.keys(i.nameTable).forEach(s=>{for(var u=i.nameTable[s];u;){var f=u.name_next;o.includes(u.mount)&&i.destroyNode(u),u=f}}),t.mounted=null;var a=t.mount.mounts.indexOf(n);t.mount.mounts.splice(a,1)},lookup:(e,r)=>e.node_ops.lookup(e,r),mknod:(e,r,t)=>{var n=i.lookupPath(e,{parent:!0}),o=n.node,a=T.basename(e);if(!a||a==="."||a==="..")throw new i.ErrnoError(28);var s=i.mayCreate(o,a);if(s)throw new i.ErrnoError(s);if(!o.node_ops.mknod)throw new i.ErrnoError(63);return o.node_ops.mknod(o,a,r,t)},create:(e,r)=>(r=r!==void 0?r:438,r&=4095,r|=32768,i.mknod(e,r,0)),mkdir:(e,r)=>(r=r!==void 0?r:511,r&=1023,r|=16384,i.mknod(e,r,0)),mkdirTree:(e,r)=>{for(var t=e.split("/"),n="",o=0;o<t.length;++o)if(!!t[o]){n+="/"+t[o];try{i.mkdir(n,r)}catch(a){if(a.errno!=20)throw a}}},mkdev:(e,r,t)=>(typeof t>"u"&&(t=r,r=438),r|=8192,i.mknod(e,r,t)),symlink:(e,r)=>{if(!q.resolve(e))throw new i.ErrnoError(44);var t=i.lookupPath(r,{parent:!0}),n=t.node;if(!n)throw new i.ErrnoError(44);var o=T.basename(r),a=i.mayCreate(n,o);if(a)throw new i.ErrnoError(a);if(!n.node_ops.symlink)throw new i.ErrnoError(63);return n.node_ops.symlink(n,o,e)},rename:(e,r)=>{var t=T.dirname(e),n=T.dirname(r),o=T.basename(e),a=T.basename(r),s,u,f;if(s=i.lookupPath(e,{parent:!0}),u=s.node,s=i.lookupPath(r,{parent:!0}),f=s.node,!u||!f)throw new i.ErrnoError(44);if(u.mount!==f.mount)throw new i.ErrnoError(75);var l=i.lookupNode(u,o),d=q.relative(e,n);if(d.charAt(0)!==".")throw new i.ErrnoError(28);if(d=q.relative(r,t),d.charAt(0)!==".")throw new i.ErrnoError(55);var w;try{w=i.lookupNode(f,a)}catch{}if(l!==w){var h=i.isDir(l.mode),p=i.mayDelete(u,o,h);if(p)throw new i.ErrnoError(p);if(p=w?i.mayDelete(f,a,h):i.mayCreate(f,a),p)throw new i.ErrnoError(p);if(!u.node_ops.rename)throw new i.ErrnoError(63);if(i.isMountpoint(l)||w&&i.isMountpoint(w))throw new i.ErrnoError(10);if(f!==u&&(p=i.nodePermissions(u,"w"),p))throw new i.ErrnoError(p);i.hashRemoveNode(l);try{u.node_ops.rename(l,f,a)}catch(E){throw E}finally{i.hashAddNode(l)}}},rmdir:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node,n=T.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!0);if(a)throw new i.ErrnoError(a);if(!t.node_ops.rmdir)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.rmdir(t,n),i.destroyNode(o)},readdir:e=>{var r=i.lookupPath(e,{follow:!0}),t=r.node;if(!t.node_ops.readdir)throw new i.ErrnoError(54);return t.node_ops.readdir(t)},unlink:e=>{var r=i.lookupPath(e,{parent:!0}),t=r.node;if(!t)throw new i.ErrnoError(44);var n=T.basename(e),o=i.lookupNode(t,n),a=i.mayDelete(t,n,!1);if(a)throw new i.ErrnoError(a);if(!t.node_ops.unlink)throw new i.ErrnoError(63);if(i.isMountpoint(o))throw new i.ErrnoError(10);t.node_ops.unlink(t,n),i.destroyNode(o)},readlink:e=>{var r=i.lookupPath(e),t=r.node;if(!t)throw new i.ErrnoError(44);if(!t.node_ops.readlink)throw new i.ErrnoError(28);return q.resolve(i.getPath(t.parent),t.node_ops.readlink(t))},stat:(e,r)=>{var t=i.lookupPath(e,{follow:!r}),n=t.node;if(!n)throw new i.ErrnoError(44);if(!n.node_ops.getattr)throw new i.ErrnoError(63);return n.node_ops.getattr(n)},lstat:e=>i.stat(e,!0),chmod:(e,r,t)=>{var n;if(typeof e=="string"){var o=i.lookupPath(e,{follow:!t});n=o.node}else n=e;if(!n.node_ops.setattr)throw new i.ErrnoError(63);n.node_ops.setattr(n,{mode:r&4095|n.mode&-4096,timestamp:Date.now()})},lchmod:(e,r)=>{i.chmod(e,r,!0)},fchmod:(e,r)=>{var t=i.getStream(e);if(!t)throw new i.ErrnoError(8);i.chmod(t.node,r)},chown:(e,r,t,n)=>{var o;if(typeof e=="string"){var a=i.lookupPath(e,{follow:!n});o=a.node}else o=e;if(!o.node_ops.setattr)throw new i.ErrnoError(63);o.node_ops.setattr(o,{timestamp:Date.now()})},lchown:(e,r,t)=>{i.chown(e,r,t,!0)},fchown:(e,r,t)=>{var n=i.getStream(e);if(!n)throw new i.ErrnoError(8);i.chown(n.node,r,t)},truncate:(e,r)=>{if(r<0)throw new i.ErrnoError(28);var t;if(typeof e=="string"){var n=i.lookupPath(e,{follow:!0});t=n.node}else t=e;if(!t.node_ops.setattr)throw new i.ErrnoError(63);if(i.isDir(t.mode))throw new i.ErrnoError(31);if(!i.isFile(t.mode))throw new i.ErrnoError(28);var o=i.nodePermissions(t,"w");if(o)throw new i.ErrnoError(o);t.node_ops.setattr(t,{size:r,timestamp:Date.now()})},ftruncate:(e,r)=>{var t=i.getStream(e);if(!t)throw new i.ErrnoError(8);if((t.flags&2097155)===0)throw new i.ErrnoError(28);i.truncate(t.node,r)},utime:(e,r,t)=>{var n=i.lookupPath(e,{follow:!0}),o=n.node;o.node_ops.setattr(o,{timestamp:Math.max(r,t)})},open:(e,r,t)=>{if(e==="")throw new i.ErrnoError(44);r=typeof r=="string"?i.modeStringToFlags(r):r,t=typeof t>"u"?438:t,r&64?t=t&4095|32768:t=0;var n;if(typeof e=="object")n=e;else{e=T.normalize(e);try{var o=i.lookupPath(e,{follow:!(r&131072)});n=o.node}catch{}}var a=!1;if(r&64)if(n){if(r&128)throw new i.ErrnoError(20)}else n=i.mknod(e,t,0),a=!0;if(!n)throw new i.ErrnoError(44);if(i.isChrdev(n.mode)&&(r&=-513),r&65536&&!i.isDir(n.mode))throw new i.ErrnoError(54);if(!a){var s=i.mayOpen(n,r);if(s)throw new i.ErrnoError(s)}r&512&&!a&&i.truncate(n,0),r&=-131713;var u=i.createStream({node:n,path:i.getPath(n),flags:r,seekable:!0,position:0,stream_ops:n.stream_ops,ungotten:[],error:!1});return u.stream_ops.open&&u.stream_ops.open(u),c.logReadFiles&&!(r&1)&&(i.readFiles||(i.readFiles={}),e in i.readFiles||(i.readFiles[e]=1)),u},close:e=>{if(i.isClosed(e))throw new i.ErrnoError(8);e.getdents&&(e.getdents=null);try{e.stream_ops.close&&e.stream_ops.close(e)}catch(r){throw r}finally{i.closeStream(e.fd)}e.fd=null},isClosed:e=>e.fd===null,llseek:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(!e.seekable||!e.stream_ops.llseek)throw new i.ErrnoError(70);if(t!=0&&t!=1&&t!=2)throw new i.ErrnoError(28);return e.position=e.stream_ops.llseek(e,r,t),e.ungotten=[],e.position},read:(e,r,t,n,o)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===1)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.read)throw new i.ErrnoError(28);var a=typeof o<"u";if(!a)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var s=e.stream_ops.read(e,r,t,n,o);return a||(e.position+=s),s},write:(e,r,t,n,o,a)=>{if(n<0||o<0)throw new i.ErrnoError(28);if(i.isClosed(e))throw new i.ErrnoError(8);if((e.flags&2097155)===0)throw new i.ErrnoError(8);if(i.isDir(e.node.mode))throw new i.ErrnoError(31);if(!e.stream_ops.write)throw new i.ErrnoError(28);e.seekable&&e.flags&1024&&i.llseek(e,0,2);var s=typeof o<"u";if(!s)o=e.position;else if(!e.seekable)throw new i.ErrnoError(70);var u=e.stream_ops.write(e,r,t,n,o,a);return s||(e.position+=u),u},allocate:(e,r,t)=>{if(i.isClosed(e))throw new i.ErrnoError(8);if(r<0||t<=0)throw new i.ErrnoError(28);if((e.flags&2097155)===0)throw new i.ErrnoError(8);if(!i.isFile(e.node.mode)&&!i.isDir(e.node.mode))throw new i.ErrnoError(43);if(!e.stream_ops.allocate)throw new i.ErrnoError(138);e.stream_ops.allocate(e,r,t)},mmap:(e,r,t,n,o)=>{if((n&2)!==0&&(o&2)===0&&(e.flags&2097155)!==2)throw new i.ErrnoError(2);if((e.flags&2097155)===1)throw new i.ErrnoError(2);if(!e.stream_ops.mmap)throw new i.ErrnoError(43);return e.stream_ops.mmap(e,r,t,n,o)},msync:(e,r,t,n,o)=>!e||!e.stream_ops.msync?0:e.stream_ops.msync(e,r,t,n,o),munmap:e=>0,ioctl:(e,r,t)=>{if(!e.stream_ops.ioctl)throw new i.ErrnoError(59);return e.stream_ops.ioctl(e,r,t)},readFile:(e,r={})=>{if(r.flags=r.flags||0,r.encoding=r.encoding||"binary",r.encoding!=="utf8"&&r.encoding!=="binary")throw new Error('Invalid encoding type "'+r.encoding+'"');var t,n=i.open(e,r.flags),o=i.stat(e),a=o.size,s=new Uint8Array(a);return i.read(n,s,0,a,0),r.encoding==="utf8"?t=ee(s,0):r.encoding==="binary"&&(t=s),i.close(n),t},writeFile:(e,r,t={})=>{t.flags=t.flags||577;var n=i.open(e,t.flags,t.mode);if(typeof r=="string"){var o=new Uint8Array(Fe(r)+1),a=pe(r,o,0,o.length);i.write(n,o,0,a,void 0,t.canOwn)}else if(ArrayBuffer.isView(r))i.write(n,r,0,r.byteLength,void 0,t.canOwn);else throw new Error("Unsupported data type");i.close(n)},cwd:()=>i.currentPath,chdir:e=>{var r=i.lookupPath(e,{follow:!0});if(r.node===null)throw new i.ErrnoError(44);if(!i.isDir(r.node.mode))throw new i.ErrnoError(54);var t=i.nodePermissions(r.node,"x");if(t)throw new i.ErrnoError(t);i.currentPath=r.path},createDefaultDirectories:()=>{i.mkdir("/tmp"),i.mkdir("/home"),i.mkdir("/home/web_user")},createDefaultDevices:()=>{i.mkdir("/dev"),i.registerDevice(i.makedev(1,3),{read:()=>0,write:(r,t,n,o,a)=>o}),i.mkdev("/dev/null",i.makedev(1,3)),J.register(i.makedev(5,0),J.default_tty_ops),J.register(i.makedev(6,0),J.default_tty1_ops),i.mkdev("/dev/tty",i.makedev(5,0)),i.mkdev("/dev/tty1",i.makedev(6,0));var e=tt();i.createDevice("/dev","random",e),i.createDevice("/dev","urandom",e),i.mkdir("/dev/shm"),i.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{i.mkdir("/proc");var e=i.mkdir("/proc/self");i.mkdir("/proc/self/fd"),i.mount({mount:()=>{var r=i.createNode(e,"fd",16895,73);return r.node_ops={lookup:(t,n)=>{var o=+n,a=i.getStream(o);if(!a)throw new i.ErrnoError(8);var s={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>a.path}};return s.parent=s,s}},r}},{},"/proc/self/fd")},createStandardStreams:()=>{c.stdin?i.createDevice("/dev","stdin",c.stdin):i.symlink("/dev/tty","/dev/stdin"),c.stdout?i.createDevice("/dev","stdout",null,c.stdout):i.symlink("/dev/tty","/dev/stdout"),c.stderr?i.createDevice("/dev","stderr",null,c.stderr):i.symlink("/dev/tty1","/dev/stderr");var e=i.open("/dev/stdin",0),r=i.open("/dev/stdout",1),t=i.open("/dev/stderr",1)},ensureErrnoError:()=>{i.ErrnoError||(i.ErrnoError=function(r,t){this.node=t,this.setErrno=function(n){this.errno=n},this.setErrno(r),this.message="FS error"},i.ErrnoError.prototype=new Error,i.ErrnoError.prototype.constructor=i.ErrnoError,[44].forEach(e=>{i.genericErrors[e]=new i.ErrnoError(e),i.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:()=>{i.ensureErrnoError(),i.nameTable=new Array(4096),i.mount(A,{},"/"),i.createDefaultDirectories(),i.createDefaultDevices(),i.createSpecialDirectories(),i.filesystems={MEMFS:A}},init:(e,r,t)=>{i.init.initialized=!0,i.ensureErrnoError(),c.stdin=e||c.stdin,c.stdout=r||c.stdout,c.stderr=t||c.stderr,i.createStandardStreams()},quit:()=>{i.init.initialized=!1;for(var e=0;e<i.streams.length;e++){var r=i.streams[e];!r||i.close(r)}},getMode:(e,r)=>{var t=0;return e&&(t|=365),r&&(t|=146),t},findObject:(e,r)=>{var t=i.analyzePath(e,r);return t.exists?t.object:null},analyzePath:(e,r)=>{try{var t=i.lookupPath(e,{follow:!r});e=t.path}catch{}var n={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var t=i.lookupPath(e,{parent:!0});n.parentExists=!0,n.parentPath=t.path,n.parentObject=t.node,n.name=T.basename(e),t=i.lookupPath(e,{follow:!r}),n.exists=!0,n.path=t.path,n.object=t.node,n.name=t.node.name,n.isRoot=t.path==="/"}catch(o){n.error=o.errno}return n},createPath:(e,r,t,n)=>{e=typeof e=="string"?e:i.getPath(e);for(var o=r.split("/").reverse();o.length;){var a=o.pop();if(!!a){var s=T.join2(e,a);try{i.mkdir(s)}catch{}e=s}}return s},createFile:(e,r,t,n,o)=>{var a=T.join2(typeof e=="string"?e:i.getPath(e),r),s=i.getMode(n,o);return i.create(a,s)},createDataFile:(e,r,t,n,o,a)=>{var s=r;e&&(e=typeof e=="string"?e:i.getPath(e),s=r?T.join2(e,r):e);var u=i.getMode(n,o),f=i.create(s,u);if(t){if(typeof t=="string"){for(var l=new Array(t.length),d=0,w=t.length;d<w;++d)l[d]=t.charCodeAt(d);t=l}i.chmod(f,u|146);var h=i.open(f,577);i.write(h,t,0,t.length,0,a),i.close(h),i.chmod(f,u)}return f},createDevice:(e,r,t,n)=>{var o=T.join2(typeof e=="string"?e:i.getPath(e),r),a=i.getMode(!!t,!!n);i.createDevice.major||(i.createDevice.major=64);var s=i.makedev(i.createDevice.major++,0);return i.registerDevice(s,{open:u=>{u.seekable=!1},close:u=>{n&&n.buffer&&n.buffer.length&&n(10)},read:(u,f,l,d,w)=>{for(var h=0,p=0;p<d;p++){var E;try{E=t()}catch{throw new i.ErrnoError(29)}if(E===void 0&&h===0)throw new i.ErrnoError(6);if(E==null)break;h++,f[l+p]=E}return h&&(u.node.timestamp=Date.now()),h},write:(u,f,l,d,w)=>{for(var h=0;h<d;h++)try{n(f[l+h])}catch{throw new i.ErrnoError(29)}return d&&(u.node.timestamp=Date.now()),h}}),i.mkdev(o,a,s)},forceLoadFile:e=>{if(e.isDevice||e.isFolder||e.link||e.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(te)try{e.contents=Ee(te(e.url),!0),e.usedBytes=e.contents.length}catch{throw new i.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(e,r,t,n,o)=>{function a(){this.lengthKnown=!1,this.chunks=[]}if(a.prototype.get=function(p){if(!(p>this.length-1||p<0)){var E=p%this.chunkSize,M=p/this.chunkSize|0;return this.getter(M)[E]}},a.prototype.setDataGetter=function(p){this.getter=p},a.prototype.cacheLength=function(){var p=new XMLHttpRequest;if(p.open("HEAD",t,!1),p.send(null),!(p.status>=200&&p.status<300||p.status===304))throw new Error("Couldn't load "+t+". Status: "+p.status);var E=Number(p.getResponseHeader("Content-length")),M,j=(M=p.getResponseHeader("Accept-Ranges"))&&M==="bytes",N=(M=p.getResponseHeader("Content-Encoding"))&&M==="gzip",v=1024*1024;j||(v=E);var S=(C,Y)=>{if(C>Y)throw new Error("invalid range ("+C+", "+Y+") or no bytes requested!");if(Y>E-1)throw new Error("only "+E+" bytes available! programmer error!");var B=new XMLHttpRequest;if(B.open("GET",t,!1),E!==v&&B.setRequestHeader("Range","bytes="+C+"-"+Y),B.responseType="arraybuffer",B.overrideMimeType&&B.overrideMimeType("text/plain; charset=x-user-defined"),B.send(null),!(B.status>=200&&B.status<300||B.status===304))throw new Error("Couldn't load "+t+". Status: "+B.status);return B.response!==void 0?new Uint8Array(B.response||[]):Ee(B.responseText||"",!0)},I=this;I.setDataGetter(C=>{var Y=C*v,B=(C+1)*v-1;if(B=Math.min(B,E-1),typeof I.chunks[C]>"u"&&(I.chunks[C]=S(Y,B)),typeof I.chunks[C]>"u")throw new Error("doXHR failed!");return I.chunks[C]}),(N||!E)&&(v=E=1,E=this.getter(0).length,v=E,me("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=E,this._chunkSize=v,this.lengthKnown=!0},typeof XMLHttpRequest<"u"){if(!W)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var s=new a;Object.defineProperties(s,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var u={isDevice:!1,contents:s}}else var u={isDevice:!1,url:t};var f=i.createFile(e,r,u,n,o);u.contents?f.contents=u.contents:u.url&&(f.contents=null,f.url=u.url),Object.defineProperties(f,{usedBytes:{get:function(){return this.contents.length}}});var l={},d=Object.keys(f.stream_ops);d.forEach(h=>{var p=f.stream_ops[h];l[h]=function(){return i.forceLoadFile(f),p.apply(null,arguments)}});function w(h,p,E,M,j){var N=h.node.contents;if(j>=N.length)return 0;var v=Math.min(N.length-j,M);if(N.slice)for(var S=0;S<v;S++)p[E+S]=N[j+S];else for(var S=0;S<v;S++)p[E+S]=N.get(j+S);return v}return l.read=(h,p,E,M,j)=>(i.forceLoadFile(f),w(h,p,E,M,j)),l.mmap=(h,p,E,M,j)=>{i.forceLoadFile(f);var N=ur(p);if(!N)throw new i.ErrnoError(48);return w(h,G,N,p,E),{ptr:N,allocated:!0}},f.stream_ops=l,f},createPreloadedFile:(e,r,t,n,o,a,s,u,f,l)=>{var d=r?q.resolve(T.join2(e,r)):e,w="cp "+d;function h(p){function E(M){l&&l(),u||i.createDataFile(e,r,M,n,o,f),a&&a(),we(w)}Browser.handledByPreloadPlugin(p,d,E,()=>{s&&s(),we(w)})||E(p)}je(w),typeof t=="string"?nt(t,p=>h(p),s):h(t)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(e,r,t)=>{r=r||(()=>{}),t=t||(()=>{});var n=i.indexedDB();try{var o=n.open(i.DB_NAME(),i.DB_VERSION)}catch(a){return t(a)}o.onupgradeneeded=()=>{me("creating db");var a=o.result;a.createObjectStore(i.DB_STORE_NAME)},o.onsuccess=()=>{var a=o.result,s=a.transaction([i.DB_STORE_NAME],"readwrite"),u=s.objectStore(i.DB_STORE_NAME),f=0,l=0,d=e.length;function w(){l==0?r():t()}e.forEach(h=>{var p=u.put(i.analyzePath(h).object.contents,h);p.onsuccess=()=>{f++,f+l==d&&w()},p.onerror=()=>{l++,f+l==d&&w()}}),s.onerror=t},o.onerror=t},loadFilesFromDB:(e,r,t)=>{r=r||(()=>{}),t=t||(()=>{});var n=i.indexedDB();try{var o=n.open(i.DB_NAME(),i.DB_VERSION)}catch(a){return t(a)}o.onupgradeneeded=t,o.onsuccess=()=>{var a=o.result;try{var s=a.transaction([i.DB_STORE_NAME],"readonly")}catch(h){t(h);return}var u=s.objectStore(i.DB_STORE_NAME),f=0,l=0,d=e.length;function w(){l==0?r():t()}e.forEach(h=>{var p=u.get(h);p.onsuccess=()=>{i.analyzePath(h).exists&&i.unlink(h),i.createDataFile(T.dirname(h),T.basename(h),p.result,!0,!0,!0),f++,f+l==d&&w()},p.onerror=()=>{l++,f+l==d&&w()}}),s.onerror=t},o.onerror=t}},x={DEFAULT_POLLMASK:5,calculateAt:function(e,r,t){if(T.isAbs(r))return r;var n;if(e===-100)n=i.cwd();else{var o=i.getStream(e);if(!o)throw new i.ErrnoError(8);n=o.path}if(r.length==0){if(!t)throw new i.ErrnoError(44);return n}return T.join2(n,r)},doStat:function(e,r,t){try{var n=e(r)}catch(o){if(o&&o.node&&T.normalize(r)!==T.normalize(i.getPath(o.node)))return-54;throw o}return D[t>>2]=n.dev,D[t+4>>2]=0,D[t+8>>2]=n.ino,D[t+12>>2]=n.mode,D[t+16>>2]=n.nlink,D[t+20>>2]=n.uid,D[t+24>>2]=n.gid,D[t+28>>2]=n.rdev,D[t+32>>2]=0,$=[n.size>>>0,(O=n.size,+Math.abs(O)>=1?O>0?(Math.min(+Math.floor(O/4294967296),4294967295)|0)>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],D[t+40>>2]=$[0],D[t+44>>2]=$[1],D[t+48>>2]=4096,D[t+52>>2]=n.blocks,D[t+56>>2]=n.atime.getTime()/1e3|0,D[t+60>>2]=0,D[t+64>>2]=n.mtime.getTime()/1e3|0,D[t+68>>2]=0,D[t+72>>2]=n.ctime.getTime()/1e3|0,D[t+76>>2]=0,$=[n.ino>>>0,(O=n.ino,+Math.abs(O)>=1?O>0?(Math.min(+Math.floor(O/4294967296),4294967295)|0)>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],D[t+80>>2]=$[0],D[t+84>>2]=$[1],0},doMsync:function(e,r,t,n,o){var a=Z.slice(e,e+t);i.msync(r,a,o,t,n)},varargs:void 0,get:function(){x.varargs+=4;var e=D[x.varargs-4>>2];return e},getStr:function(e){var r=oe(e);return r},getStreamFromFD:function(e){var r=i.getStream(e);if(!r)throw new i.ErrnoError(8);return r}};function it(e,r,t){x.varargs=t;try{var n=x.getStreamFromFD(e);switch(r){case 0:{var o=x.get();if(o<0)return-28;var a;return a=i.createStream(n,o),a.fd}case 1:case 2:return 0;case 3:return n.flags;case 4:{var o=x.get();return n.flags|=o,0}case 5:{var o=x.get(),s=0;return Je[o+s>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return rt(28),-1;default:return-28}}catch(u){if(typeof i>"u"||!(u instanceof i.ErrnoError))throw u;return-u.errno}}function ot(e,r,t){x.varargs=t;try{var n=x.getStreamFromFD(e);switch(r){case 21509:case 21505:return n.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return n.tty?0:-59;case 21519:{if(!n.tty)return-59;var o=x.get();return D[o>>2]=0,0}case 21520:return n.tty?-28:-59;case 21531:{var o=x.get();return i.ioctl(n,r,o)}case 21523:return n.tty?0:-59;case 21524:return n.tty?0:-59;default:K("bad ioctl syscall "+r)}}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function at(e,r,t,n){x.varargs=n;try{r=x.getStr(r),r=x.calculateAt(e,r);var o=n?x.get():0;return i.open(r,t,o).fd}catch(a){if(typeof i>"u"||!(a instanceof i.ErrnoError))throw a;return-a.errno}}function st(e){try{return e=x.getStr(e),i.rmdir(e),0}catch(r){if(typeof i>"u"||!(r instanceof i.ErrnoError))throw r;return-r.errno}}function ut(e,r){try{return e=x.getStr(e),x.doStat(i.stat,e,r)}catch(t){if(typeof i>"u"||!(t instanceof i.ErrnoError))throw t;return-t.errno}}function ct(e,r,t){try{return r=x.getStr(r),r=x.calculateAt(e,r),t===0?i.unlink(r):t===512?i.rmdir(r):K("Invalid flags passed to unlinkat"),0}catch(n){if(typeof i>"u"||!(n instanceof i.ErrnoError))throw n;return-n.errno}}function ft(){return Date.now()}function lt(){throw 1/0}function dt(e,r){var t=new Date(D[e>>2]*1e3);D[r>>2]=t.getUTCSeconds(),D[r+4>>2]=t.getUTCMinutes(),D[r+8>>2]=t.getUTCHours(),D[r+12>>2]=t.getUTCDate(),D[r+16>>2]=t.getUTCMonth(),D[r+20>>2]=t.getUTCFullYear()-1900,D[r+24>>2]=t.getUTCDay();var n=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0),o=(t.getTime()-n)/(1e3*60*60*24)|0;D[r+28>>2]=o}function vt(e){var r=Date.UTC(D[e+20>>2]+1900,D[e+16>>2],D[e+12>>2],D[e+8>>2],D[e+4>>2],D[e>>2],0),t=new Date(r);D[e+24>>2]=t.getUTCDay();var n=Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0),o=(t.getTime()-n)/(1e3*60*60*24)|0;return D[e+28>>2]=o,t.getTime()/1e3|0}function mt(e,r,t){var n=new Date().getFullYear(),o=new Date(n,0,1),a=new Date(n,6,1),s=o.getTimezoneOffset(),u=a.getTimezoneOffset(),f=Math.max(s,u);D[e>>2]=f*60,D[r>>2]=Number(s!=u);function l(E){var M=E.toTimeString().match(/\(([A-Za-z ]+)\)$/);return M?M[1]:"GMT"}var d=l(o),w=l(a),h=qe(d),p=qe(w);u<s?(z[t>>2]=h,z[t+4>>2]=p):(z[t>>2]=p,z[t+4>>2]=h)}function Be(e,r,t){Be.called||(Be.called=!0,mt(e,r,t))}var Oe=[];function ht(e,r){Oe.length=0;var t;for(r>>=2;t=Z[e++];)r+=t!=105&r,Oe.push(t==105?D[r]:Ze[r++>>1]),++r;return Oe}function pt(e,r,t){var n=ht(r,t);return et[e].apply(null,n)}function wt(e,r,t){Z.copyWithin(e,r,r+t)}function gt(){return 2147483648}function yt(e){try{return he.grow(e-xe.byteLength+65535>>>16),Qe(he.buffer),1}catch{}}function _t(e){var r=Z.length;e=e>>>0;var t=gt();if(e>t)return!1;let n=(f,l)=>f+(l-f%l)%l;for(var o=1;o<=4;o*=2){var a=r*(1+.2/o);a=Math.min(a,e+100663296);var s=Math.min(t,n(Math.max(e,a),65536)),u=yt(s);if(u)return!0}return!1}var Le={};function Et(){return V||"./this.program"}function se(){if(!se.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Et()};for(var t in Le)Le[t]===void 0?delete r[t]:r[t]=Le[t];var n=[];for(var t in r)n.push(t+"="+r[t]);se.strings=n}return se.strings}function kt(e,r){var t=0;return se().forEach(function(n,o){var a=r+t;z[e+o*4>>2]=a,zr(n,a),t+=n.length+1}),0}function bt(e,r){var t=se();z[e>>2]=t.length;var n=0;return t.forEach(function(o){n+=o.length+1}),z[r>>2]=n,0}function Dt(e){fi(e)}function St(e){try{var r=x.getStreamFromFD(e);return i.close(r),0}catch(t){if(typeof i>"u"||!(t instanceof i.ErrnoError))throw t;return t.errno}}function Pt(e,r,t,n){for(var o=0,a=0;a<t;a++){var s=z[r>>2],u=z[r+4>>2];r+=8;var f=i.read(e,G,s,u,n);if(f<0)return-1;if(o+=f,f<u)break}return o}function At(e,r,t,n){try{var o=x.getStreamFromFD(e),a=Pt(o,r,t);return D[n>>2]=a,0}catch(s){if(typeof i>"u"||!(s instanceof i.ErrnoError))throw s;return s.errno}}function Mt(e,r){return r+2097152>>>0<4194305-!!e?(e>>>0)+r*4294967296:NaN}function Rt(e,r,t,n,o){try{var a=Mt(r,t);if(isNaN(a))return 61;var s=x.getStreamFromFD(e);return i.llseek(s,a,n),$=[s.position>>>0,(O=s.position,+Math.abs(O)>=1?O>0?(Math.min(+Math.floor(O/4294967296),4294967295)|0)>>>0:~~+Math.ceil((O-+(~~O>>>0))/4294967296)>>>0:0)],D[o>>2]=$[0],D[o+4>>2]=$[1],s.getdents&&a===0&&n===0&&(s.getdents=null),0}catch(u){if(typeof i>"u"||!(u instanceof i.ErrnoError))throw u;return u.errno}}function Tt(e,r,t,n){for(var o=0,a=0;a<t;a++){var s=z[r>>2],u=z[r+4>>2];r+=8;var f=i.write(e,G,s,u,n);if(f<0)return-1;o+=f}return o}function Ct(e,r,t,n){try{var o=x.getStreamFromFD(e),a=Tt(o,r,t);return z[n>>2]=a,0}catch(s){if(typeof i>"u"||!(s instanceof i.ErrnoError))throw s;return s.errno}}function Ft(){return Nr()}function xt(e){jr(e)}function ge(e){return e%4===0&&(e%100!==0||e%400===0)}function It(e,r){for(var t=0,n=0;n<=r;t+=e[n++]);return t}var cr=[31,29,31,30,31,30,31,31,30,31,30,31],fr=[31,28,31,30,31,30,31,31,30,31,30,31];function jt(e,r){for(var t=new Date(e.getTime());r>0;){var n=ge(t.getFullYear()),o=t.getMonth(),a=(n?cr:fr)[o];if(r>a-t.getDate())r-=a-t.getDate()+1,t.setDate(1),o<11?t.setMonth(o+1):(t.setMonth(0),t.setFullYear(t.getFullYear()+1));else return t.setDate(t.getDate()+r),t}return t}function Nt(e,r,t,n){var o=D[n+40>>2],a={tm_sec:D[n>>2],tm_min:D[n+4>>2],tm_hour:D[n+8>>2],tm_mday:D[n+12>>2],tm_mon:D[n+16>>2],tm_year:D[n+20>>2],tm_wday:D[n+24>>2],tm_yday:D[n+28>>2],tm_isdst:D[n+32>>2],tm_gmtoff:D[n+36>>2],tm_zone:o?oe(o):""},s=oe(t),u={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var f in u)s=s.replace(new RegExp(f,"g"),u[f]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"];function w(v,S,I){for(var C=typeof v=="number"?v.toString():v||"";C.length<S;)C=I[0]+C;return C}function h(v,S){return w(v,S,"0")}function p(v,S){function I(Y){return Y<0?-1:Y>0?1:0}var C;return(C=I(v.getFullYear()-S.getFullYear()))===0&&(C=I(v.getMonth()-S.getMonth()))===0&&(C=I(v.getDate()-S.getDate())),C}function E(v){switch(v.getDay()){case 0:return new Date(v.getFullYear()-1,11,29);case 1:return v;case 2:return new Date(v.getFullYear(),0,3);case 3:return new Date(v.getFullYear(),0,2);case 4:return new Date(v.getFullYear(),0,1);case 5:return new Date(v.getFullYear()-1,11,31);case 6:return new Date(v.getFullYear()-1,11,30)}}function M(v){var S=jt(new Date(v.tm_year+1900,0,1),v.tm_yday),I=new Date(S.getFullYear(),0,4),C=new Date(S.getFullYear()+1,0,4),Y=E(I),B=E(C);return p(Y,S)<=0?p(B,S)<=0?S.getFullYear()+1:S.getFullYear():S.getFullYear()-1}var j={"%a":function(v){return l[v.tm_wday].substring(0,3)},"%A":function(v){return l[v.tm_wday]},"%b":function(v){return d[v.tm_mon].substring(0,3)},"%B":function(v){return d[v.tm_mon]},"%C":function(v){var S=v.tm_year+1900;return h(S/100|0,2)},"%d":function(v){return h(v.tm_mday,2)},"%e":function(v){return w(v.tm_mday,2," ")},"%g":function(v){return M(v).toString().substring(2)},"%G":function(v){return M(v)},"%H":function(v){return h(v.tm_hour,2)},"%I":function(v){var S=v.tm_hour;return S==0?S=12:S>12&&(S-=12),h(S,2)},"%j":function(v){return h(v.tm_mday+It(ge(v.tm_year+1900)?cr:fr,v.tm_mon-1),3)},"%m":function(v){return h(v.tm_mon+1,2)},"%M":function(v){return h(v.tm_min,2)},"%n":function(){return`
`},"%p":function(v){return v.tm_hour>=0&&v.tm_hour<12?"AM":"PM"},"%S":function(v){return h(v.tm_sec,2)},"%t":function(){return"	"},"%u":function(v){return v.tm_wday||7},"%U":function(v){var S=v.tm_yday+7-v.tm_wday;return h(Math.floor(S/7),2)},"%V":function(v){var S=Math.floor((v.tm_yday+7-(v.tm_wday+6)%7)/7);if((v.tm_wday+371-v.tm_yday-2)%7<=2&&S++,S){if(S==53){var C=(v.tm_wday+371-v.tm_yday)%7;C!=4&&(C!=3||!ge(v.tm_year))&&(S=1)}}else{S=52;var I=(v.tm_wday+7-v.tm_yday-1)%7;(I==4||I==5&&ge(v.tm_year%400-1))&&S++}return h(S,2)},"%w":function(v){return v.tm_wday},"%W":function(v){var S=v.tm_yday+7-(v.tm_wday+6)%7;return h(Math.floor(S/7),2)},"%y":function(v){return(v.tm_year+1900).toString().substring(2)},"%Y":function(v){return v.tm_year+1900},"%z":function(v){var S=v.tm_gmtoff,I=S>=0;return S=Math.abs(S)/60,S=S/60*100+S%60,(I?"+":"-")+String("0000"+S).slice(-4)},"%Z":function(v){return v.tm_zone},"%%":function(){return"%"}};s=s.replace(/%%/g,"\0\0");for(var f in j)s.includes(f)&&(s=s.replace(new RegExp(f,"g"),j[f](a)));s=s.replace(/\0\0/g,"%");var N=Ee(s,!1);return N.length>r?0:(Ke(N,e),N.length-1)}var lr=function(e,r,t,n){e||(e=this),this.parent=e,this.mount=e.mount,this.mounted=null,this.id=i.nextInode++,this.name=r,this.mode=t,this.node_ops={},this.stream_ops={},this.rdev=n},ye=365,_e=146;Object.defineProperties(lr.prototype,{read:{get:function(){return(this.mode&ye)===ye},set:function(e){e?this.mode|=ye:this.mode&=~ye}},write:{get:function(){return(this.mode&_e)===_e},set:function(e){e?this.mode|=_e:this.mode&=~_e}},isFolder:{get:function(){return i.isDir(this.mode)}},isDevice:{get:function(){return i.isChrdev(this.mode)}}}),i.FSNode=lr,i.staticInit();function Ee(e,r,t){var n=t>0?t:Fe(e)+1,o=new Array(n),a=pe(e,o,0,o.length);return r&&(o.length=a),o}var Bt={R:it,ya:ot,za:at,sa:st,ra:ut,ta:ct,Aa:ft,qa:lt,Ba:dt,Ca:vt,Da:Be,P:pt,Ea:wt,L:_t,ua:kt,va:bt,ba:Dt,Q:St,xa:At,da:Rt,wa:Ct,a:Ft,t:Pn,n:xn,Ga:Vn,C:Rn,O:En,h:$t,$:Cn,c:qt,Na:rn,d:Xt,Ja:Fn,W:Yn,j:nn,Fa:Kn,I:$n,ca:mn,U:Xn,o:tn,m:on,Ha:Hn,u:en,E:pn,J:kn,H:an,N:Dn,Ma:bn,ma:ri,la:ti,ea:ci,fa:ui,na:ei,ja:ii,oa:Qn,ga:si,i:Jt,e:Kt,v:Tn,w:hn,p:yn,Z:Bn,y:In,D:jn,S:Jn,_:Nn,X:zn,g:Zt,Ia:Un,aa:Mn,V:Wn,f:Qt,Y:Ln,r:On,B:ln,k:un,T:qn,l:sn,F:fn,s:dn,A:vn,x:cn,M:Gn,q:_n,G:gn,K:wn,La:An,z:Sn,ha:ai,ka:ni,ia:oi,pa:Zn,b:xt,Ka:Nt},wi=Qr(),Ot=c.___wasm_call_ctors=function(){return(Ot=c.___wasm_call_ctors=c.asm.Pa).apply(null,arguments)},Lt=c._initContext=function(){return(Lt=c._initContext=c.asm.Qa).apply(null,arguments)},Ut=c._openDocumentFromBuffer=function(){return(Ut=c._openDocumentFromBuffer=c.asm.Ra).apply(null,arguments)},zt=c._countPages=function(){return(zt=c._countPages=c.asm.Sa).apply(null,arguments)},Ht=c._drawPageAsSVG=function(){return(Ht=c._drawPageAsSVG=c.asm.Ta).apply(null,arguments)},Vt=c._pageWidth=function(){return(Vt=c._pageWidth=c.asm.Ua).apply(null,arguments)},Yt=c._pageHeight=function(){return(Yt=c._pageHeight=c.asm.Va).apply(null,arguments)},Wt=c._documentTitle=function(){return(Wt=c._documentTitle=c.asm.Wa).apply(null,arguments)},Gt=c._loadOutline=function(){return(Gt=c._loadOutline=c.asm.Xa).apply(null,arguments)},dr=c._malloc=function(){return(dr=c._malloc=c.asm.Ya).apply(null,arguments)},vr=c.___errno_location=function(){return(vr=c.___errno_location=c.asm._a).apply(null,arguments)},_=c._setThrew=function(){return(_=c._setThrew=c.asm.$a).apply(null,arguments)},g=c.stackSave=function(){return(g=c.stackSave=c.asm.ab).apply(null,arguments)},y=c.stackRestore=function(){return(y=c.stackRestore=c.asm.bb).apply(null,arguments)},Ue=c.stackAlloc=function(){return(Ue=c.stackAlloc=c.asm.cb).apply(null,arguments)},mr=c.dynCall_vij=function(){return(mr=c.dynCall_vij=c.asm.db).apply(null,arguments)},hr=c.dynCall_jii=function(){return(hr=c.dynCall_jii=c.asm.eb).apply(null,arguments)},pr=c.dynCall_viiji=function(){return(pr=c.dynCall_viiji=c.asm.fb).apply(null,arguments)},wr=c.dynCall_iiijj=function(){return(wr=c.dynCall_iiijj=c.asm.gb).apply(null,arguments)},gr=c.dynCall_iiiiiiiij=function(){return(gr=c.dynCall_iiiiiiiij=c.asm.hb).apply(null,arguments)},yr=c.dynCall_iiiiiiji=function(){return(yr=c.dynCall_iiiiiiji=c.asm.ib).apply(null,arguments)},_r=c.dynCall_viij=function(){return(_r=c.dynCall_viij=c.asm.jb).apply(null,arguments)},Er=c.dynCall_iij=function(){return(Er=c.dynCall_iij=c.asm.kb).apply(null,arguments)},kr=c.dynCall_viiij=function(){return(kr=c.dynCall_viiij=c.asm.lb).apply(null,arguments)},br=c.dynCall_jiij=function(){return(br=c.dynCall_jiij=c.asm.mb).apply(null,arguments)},Dr=c.dynCall_iiij=function(){return(Dr=c.dynCall_iiij=c.asm.nb).apply(null,arguments)},Sr=c.dynCall_iiiiij=function(){return(Sr=c.dynCall_iiiiij=c.asm.ob).apply(null,arguments)};function Xt(e,r,t,n){var o=g();try{return b(e)(r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function $t(e,r){var t=g();try{return b(e)(r)}catch(n){if(y(t),n!==n+0)throw n;_(1,0)}}function qt(e,r,t){var n=g();try{return b(e)(r,t)}catch(o){if(y(n),o!==o+0)throw o;_(1,0)}}function Kt(e,r,t){var n=g();try{b(e)(r,t)}catch(o){if(y(n),o!==o+0)throw o;_(1,0)}}function Jt(e,r){var t=g();try{b(e)(r)}catch(n){if(y(t),n!==n+0)throw n;_(1,0)}}function Zt(e,r,t,n){var o=g();try{b(e)(r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function Qt(e,r,t,n,o){var a=g();try{b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function en(e,r,t,n,o,a,s,u){var f=g();try{return b(e)(r,t,n,o,a,s,u)}catch(l){if(y(f),l!==l+0)throw l;_(1,0)}}function rn(e,r,t,n,o){var a=g();try{return b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function tn(e,r,t,n,o,a){var s=g();try{return b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function nn(e,r,t,n,o){var a=g();try{return b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function on(e,r,t,n,o,a,s){var u=g();try{return b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function an(e,r,t,n,o,a,s,u,f,l,d){var w=g();try{return b(e)(r,t,n,o,a,s,u,f,l,d)}catch(h){if(y(w),h!==h+0)throw h;_(1,0)}}function sn(e,r,t,n,o,a,s){var u=g();try{b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function un(e,r,t,n,o,a){var s=g();try{b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function cn(e,r,t,n,o,a,s,u,f,l){var d=g();try{b(e)(r,t,n,o,a,s,u,f,l)}catch(w){if(y(d),w!==w+0)throw w;_(1,0)}}function fn(e,r,t,n,o,a,s,u,f){var l=g();try{b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function ln(e,r,t,n,o,a,s){var u=g();try{b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function dn(e,r,t,n,o,a,s,u){var f=g();try{b(e)(r,t,n,o,a,s,u)}catch(l){if(y(f),l!==l+0)throw l;_(1,0)}}function vn(e,r,t,n,o,a,s,u,f){var l=g();try{b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function mn(e,r,t,n,o,a,s,u,f){var l=g();try{return b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function hn(e,r,t,n){var o=g();try{b(e)(r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function pn(e,r,t,n,o,a,s,u,f){var l=g();try{return b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function wn(e,r,t,n,o,a,s,u,f,l,d){var w=g();try{b(e)(r,t,n,o,a,s,u,f,l,d)}catch(h){if(y(w),h!==h+0)throw h;_(1,0)}}function gn(e,r,t,n,o,a,s,u,f,l){var d=g();try{b(e)(r,t,n,o,a,s,u,f,l)}catch(w){if(y(d),w!==w+0)throw w;_(1,0)}}function yn(e,r,t,n,o){var a=g();try{b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function _n(e,r,t,n,o,a,s,u,f){var l=g();try{b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function En(e,r,t,n,o,a){var s=g();try{return b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function kn(e,r,t,n,o,a,s,u,f,l){var d=g();try{return b(e)(r,t,n,o,a,s,u,f,l)}catch(w){if(y(d),w!==w+0)throw w;_(1,0)}}function bn(e,r,t,n,o,a,s,u,f,l,d,w,h,p,E,M,j){var N=g();try{return b(e)(r,t,n,o,a,s,u,f,l,d,w,h,p,E,M,j)}catch(v){if(y(N),v!==v+0)throw v;_(1,0)}}function Dn(e,r,t,n,o,a,s,u,f,l,d,w,h,p){var E=g();try{return b(e)(r,t,n,o,a,s,u,f,l,d,w,h,p)}catch(M){if(y(E),M!==M+0)throw M;_(1,0)}}function Sn(e,r,t,n,o,a,s,u,f,l,d,w,h,p){var E=g();try{b(e)(r,t,n,o,a,s,u,f,l,d,w,h,p)}catch(M){if(y(E),M!==M+0)throw M;_(1,0)}}function Pn(e,r,t){var n=g();try{return b(e)(r,t)}catch(o){if(y(n),o!==o+0)throw o;_(1,0)}}function An(e,r,t,n,o,a,s,u,f,l,d,w){var h=g();try{b(e)(r,t,n,o,a,s,u,f,l,d,w)}catch(p){if(y(h),p!==p+0)throw p;_(1,0)}}function Mn(e,r,t,n,o){var a=g();try{b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function Rn(e,r,t,n,o){var a=g();try{return b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function Tn(e,r,t,n){var o=g();try{b(e)(r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function Cn(e,r,t){var n=g();try{return b(e)(r,t)}catch(o){if(y(n),o!==o+0)throw o;_(1,0)}}function Fn(e,r,t,n,o){var a=g();try{return b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function xn(e,r,t,n){var o=g();try{return b(e)(r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function In(e,r,t,n,o,a,s){var u=g();try{b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function jn(e,r,t,n,o,a,s,u,f){var l=g();try{b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function Nn(e,r,t,n,o,a,s){var u=g();try{b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function Bn(e,r,t,n,o,a){var s=g();try{b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function On(e,r,t,n,o,a,s){var u=g();try{b(e)(r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function Ln(e,r,t,n,o,a){var s=g();try{b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function Un(e,r,t,n,o){var a=g();try{b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function zn(e,r,t,n,o){var a=g();try{b(e)(r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function Hn(e,r,t,n,o,a,s,u,f){var l=g();try{return b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function Vn(e,r,t,n,o,a,s,u){var f=g();try{return b(e)(r,t,n,o,a,s,u)}catch(l){if(y(f),l!==l+0)throw l;_(1,0)}}function Yn(e,r,t,n,o,a){var s=g();try{return b(e)(r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function Wn(e,r,t,n,o,a,s,u,f,l,d,w){var h=g();try{b(e)(r,t,n,o,a,s,u,f,l,d,w)}catch(p){if(y(h),p!==p+0)throw p;_(1,0)}}function Gn(e,r,t,n,o,a,s,u,f,l,d,w,h,p,E,M,j,N,v,S){var I=g();try{b(e)(r,t,n,o,a,s,u,f,l,d,w,h,p,E,M,j,N,v,S)}catch(C){if(y(I),C!==C+0)throw C;_(1,0)}}function Xn(e,r,t,n,o,a,s,u,f,l,d,w,h){var p=g();try{return b(e)(r,t,n,o,a,s,u,f,l,d,w,h)}catch(E){if(y(p),E!==E+0)throw E;_(1,0)}}function $n(e,r,t,n,o,a,s,u){var f=g();try{return b(e)(r,t,n,o,a,s,u)}catch(l){if(y(f),l!==l+0)throw l;_(1,0)}}function qn(e,r,t,n,o,a,s,u,f){var l=g();try{b(e)(r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function Kn(e,r,t,n,o,a,s,u,f,l,d,w){var h=g();try{return b(e)(r,t,n,o,a,s,u,f,l,d,w)}catch(p){if(y(h),p!==p+0)throw p;_(1,0)}}function Jn(e,r,t,n,o,a,s,u,f,l){var d=g();try{b(e)(r,t,n,o,a,s,u,f,l)}catch(w){if(y(d),w!==w+0)throw w;_(1,0)}}function Zn(e,r,t,n){var o=g();try{mr(e,r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function Qn(e,r,t){var n=g();try{return hr(e,r,t)}catch(o){if(y(n),o!==o+0)throw o;_(1,0)}}function ei(e,r,t,n,o,a,s){var u=g();try{return wr(e,r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}function ri(e,r,t,n,o,a,s,u,f,l){var d=g();try{return gr(e,r,t,n,o,a,s,u,f,l)}catch(w){if(y(d),w!==w+0)throw w;_(1,0)}}function ti(e,r,t,n,o,a,s,u,f){var l=g();try{return yr(e,r,t,n,o,a,s,u,f)}catch(d){if(y(l),d!==d+0)throw d;_(1,0)}}function ni(e,r,t,n,o){var a=g();try{_r(e,r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function ii(e,r,t,n){var o=g();try{return Er(e,r,t,n)}catch(a){if(y(o),a!==a+0)throw a;_(1,0)}}function oi(e,r,t,n,o,a){var s=g();try{pr(e,r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function ai(e,r,t,n,o,a){var s=g();try{kr(e,r,t,n,o,a)}catch(u){if(y(s),u!==u+0)throw u;_(1,0)}}function si(e,r,t,n,o){var a=g();try{return br(e,r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function ui(e,r,t,n,o){var a=g();try{return Dr(e,r,t,n,o)}catch(s){if(y(a),s!==s+0)throw s;_(1,0)}}function ci(e,r,t,n,o,a,s){var u=g();try{return Sr(e,r,t,n,o,a,s)}catch(f){if(y(u),f!==f+0)throw f;_(1,0)}}c.ccall=Xe,c.cwrap=Lr;var ke;function ze(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}ae=function e(){ke||He(),ke||(ae=e)};function He(e){if(e=e||H,Q>0||(Wr(),Q>0))return;function r(){ke||(ke=!0,c.calledRun=!0,!Te&&(Gr(),k(c),c.onRuntimeInitialized&&c.onRuntimeInitialized(),Xr()))}c.setStatus?(c.setStatus("Running..."),setTimeout(function(){setTimeout(function(){c.setStatus("")},1),r()},1)):r()}c.run=He;function fi(e,r){Ce=e,li(e)}function li(e){Ce=e,ir()||(c.onExit&&c.onExit(e),Te=!0),re(e,new ze(e))}if(c.preInit)for(typeof c.preInit=="function"&&(c.preInit=[c.preInit]);c.preInit.length>0;)c.preInit.pop()();return He(),c.ready}})(),Ar=di;var Ve=class{mu_doc;mu_openDocumentFromBuffer;mu_initContext;mu_documentTitle;mu_countPages;mu_pageWidth;mu_pageHeight;mu_loadOutline;mu_drawPageAsSVG;async loadModule(){let m=await Ar();this.mu_initContext=m.cwrap("initContext",null,[]),this.mu_openDocumentFromBuffer=m.cwrap("openDocumentFromBuffer",null,["array","number","string"]),this.mu_documentTitle=m.cwrap("documentTitle","string",[]),this.mu_countPages=m.cwrap("countPages","number",[]),this.mu_pageWidth=m.cwrap("pageWidth","number",["number"]),this.mu_pageHeight=m.cwrap("pageHeight","number",["number"]),this.mu_loadOutline=m.cwrap("loadOutline","string",[]),this.mu_drawPageAsSVG=m.cwrap("drawPageAsSVG","string",["number","number"]),console.log("--Mu: Module Loaded")}},Se=class extends Ve{pageinfo;renderer;interact;async init(m){await this.loadModule();let k=await(await fetch(m)).arrayBuffer(),P=new Uint8Array(k);this.mu_initContext(),this.mu_openDocumentFromBuffer(P,P.length,"1.pdf"),console.log("--Mu: Document Loaded"),this.initPages(),this.initRenderer(),this.initInteract(),console.log("--Mu: Component Loaded")}initPages(){let m=this.mu_countPages(),c=new Uint32Array(m+1),k=new Uint32Array(m+1);for(var P=1;P<=m;P++){let F=this.mu_pageWidth(P),H=this.mu_pageHeight(P);c[P]=F,k[P]=H}this.pageinfo={doc_title:this.mu_documentTitle(),doc_pages:m,page_width:c,page_height:k},console.log(this.mu_loadOutline()),console.log(1)}initRenderer(){this.renderer={renderSVG:async m=>{var c=this.mu_drawPageAsSVG(m,0).replace("viewBox",'buffered-rendering="static" viewBox').replaceAll("font_",`font_${m}_`).replaceAll('<mask id="ma',`<mask id="ma_${m}_`).replaceAll('"url(#ma',`"url(#ma_${m}_`).replaceAll('<clipPath id="cp',`<clipPath id="cp_${m}_`).replaceAll('"url(#cp',`"url(#cp_${m}_`);return c}}}initInteract(){this.interact={getOutline:async()=>(console.log(this.mu_loadOutline()),{title:this.pageinfo.doc_title,page:0,x:0,y:0,children:JSON.parse(this.mu_loadOutline())})}}};function Mr(R){return new Promise((m,c)=>{setTimeout(m,R)})}function ue(){return[window.scrollX+visualViewport.offsetLeft,window.scrollY+visualViewport.offsetTop,window.scrollX+visualViewport.offsetLeft+visualViewport.width,window.scrollY+visualViewport.offsetTop+visualViewport.height]}function Ye(R){let m=ue();return m[1]-=R*visualViewport.height,m[3]+=R*visualViewport.height,m}function Rr(R,m,c,k){var P=0,F=!1;return async H=>{let V=++P;F||(F=!0,R&&console.log(`--Action: Begin ${R}--`),c&&c()),await Mr(m),P==V&&(F=!1,k&&k(),R&&console.log(`--Action: End   ${R}--`))}}var Pe=class extends Map{trim(m,c,k){if(this.size>m)for(let[P,F]of this.entries())c(P)||(this.delete(P),k(F))}getOrSet(m,c){if(this.has(m))return this.get(m);{let k=c();return this.set(m,k),k}}};var vi=12,Ae=class{doc_page;doc_render;viewer_layout;viewer_div=document.createElement("div");viewer_pages=new Pe;async init(m,c){this.viewer_layout=c,this.viewer_div.style.setProperty("--image-quality","auto"),this.doc_page=m.pageinfo,this.doc_render=m.renderer,c.setContainerCSS(this.viewer_div),document.body.appendChild(this.viewer_div),document.title=this.doc_page.doc_title;let k=this.viewer_layout.getPageRange(Ye(2));this.viewUpdateEarly(k);let P=()=>this.onScrollIng(),F=Rr("scroll",160,null,()=>this.onScrollEnd());window.addEventListener("scroll",P),window.addEventListener("scroll",F),visualViewport.addEventListener("scroll",P),visualViewport.addEventListener("scroll",F)}pageAdd(m){let c={img:document.createElement("div"),div:document.createElement("div"),pn:m},k=c.img,P=c.div;return this.viewer_pages.set(m,c),this.viewer_layout.setPageCSS(P,k,m),this.viewer_div.appendChild(P),P.appendChild(k),c}pageRemove(m){let{div:c,img:k}=m;console.log(`Removing ${m.pn}`),this.viewer_div.removeChild(c),c.removeChild(k),k.className=""}async pageDraw(m,c){m.img.innerHTML=await this.doc_render.renderSVG(m.pn,-1)}async viewUpdateEarly([m,c]){for(var k=m;k<=c;k++)if(!this.viewer_pages.has(k)){let P=this.pageAdd(k);await this.pageDraw(P,1)}this.viewer_pages.trim(vi,P=>m<=P&&P<=c,P=>this.pageRemove(P))}async viewUpdateUrgent([m,c]){let k=[];m-1>=1&&k.push(m-1),c+1<=this.doc_page.doc_pages&&k.push(c+1);for(var P of k)if(!this.viewer_pages.has(P)){let F=this.pageAdd(P);await this.pageDraw(F,0)}}onScrollIng(){let m=this.viewer_layout.getPageRange(ue());this.viewUpdateUrgent(m)}onScrollEnd(){let m=this.viewer_layout.getPageRange(Ye(3));this.viewUpdateEarly(m)}};var Tr=(R,m)=>{let c=document.createElement("span");if(c.innerHTML=R.title+"&#10;&#13;",c.addEventListener("click",k=>{m.scrollTo(R.page,R.x,R.y)}),R.children){let k=document.createElement("details"),P=document.createElement("summary");P.appendChild(c),k.appendChild(P);for(let F of R.children)k.appendChild(Tr(F,m));return k}else return c.className="MenuOutlineTitleSingle",c},Me=class extends Ae{doc_interact;async init(m,c){super.init(m,c),this.doc_interact=m.interact;let k=await this.doc_interact.getOutline(),P=Tr(k,this.viewer_layout),F=document.createElement("div");F.id="MenuOutline",F.appendChild(P),document.body.appendChild(F),document.addEventListener("keydown",H=>{let V=c.getPageRange(ue())[0]-1;H.key=="n"?c.scrollTo(Math.min(V+1,m.pageinfo.doc_pages-1),0,0):H.key=="k"&&c.scrollTo(Math.max(V-1,0),0,0)})}};function mi(){let R=document.createElement("div");document.body.appendChild(R);let m=document.createElement("input");return m.className="FileUploader",m.type="file",m.accept=".pdf",R.appendChild(m),new Promise((c,k)=>{m.addEventListener("change",P=>{P.preventDefault();let F=m.files[0];document.body.removeChild(R),c(URL.createObjectURL(F))})})}async function Cr(){return window.location.href.startsWith("http://localhost")?"sample1.pdf":mi()}(async()=>{let R=await Cr(),m=new Se;await m.init(R);let c=new De(25,m.pageinfo);new Me().init(m,c)})();})();
